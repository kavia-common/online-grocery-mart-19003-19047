{"is_source_file": true, "format": "JavaScript", "description": "This file implements discount-related services, including validation, calculation, CRUD operations, and application of discounts in an online grocery shopping system.", "external_files": ["../models/discountModel"], "external_methods": ["model.listAll", "model.getById", "model.create", "model.update", "model.remove", "model.getByCode", "model.recordApplication"], "published": ["isDiscountValid", "computeDiscountAmount", "listDiscounts", "getDiscount", "createDiscount", "updateDiscount", "deleteDiscount", "applyDiscount"], "classes": [], "methods": [{"name": "isDiscountValid(discount, at = new Date())", "description": "Checks if a discount is valid and active based on current date and discount's validFrom and validTo fields.", "scope": "", "scopeKind": ""}, {"name": "computeDiscountAmount(discount, cartTotal)", "description": "Calculates the discount amount based on discount type and cart total, handling percentage, fixed, and BOGO types.", "scope": "", "scopeKind": ""}, {"name": "listDiscounts()", "description": "Returns all discounts sorted by creation date.", "scope": "", "scopeKind": ""}, {"name": "getDiscount(id)", "description": "Retrieves a specific discount by its ID.", "scope": "", "scopeKind": ""}, {"name": "createDiscount(dto)", "description": "Creates a new discount after validating validFrom and validTo date fields.", "scope": "", "scopeKind": ""}, {"name": "updateDiscount(id, dto)", "description": "Updates an existing discount after validating date fields.", "scope": "", "scopeKind": ""}, {"name": "deleteDiscount(id)", "description": "Deletes a discount by ID.", "scope": "", "scopeKind": ""}, {"name": "applyDiscount({ cartId, discountCode, cartTotal = 0 })", "description": "Applies a discount to a cart, recording the application and returning discount details.", "scope": "", "scopeKind": ""}], "calls": ["model.listAll", "model.getById", "model.create", "model.update", "model.remove", "model.getByCode", "model.recordApplication"], "search-terms": ["discountService", "discount validation", "apply discount", "discount calculation", "discount CRUD", "discount model"], "state": 2, "file_id": 17, "knowledge_revision": 36, "git_revision": "", "ctags": [{"_type": "tag", "name": "applyDiscount", "path": "/home/kavia/workspace/code-generation/online-grocery-mart-19003-19047/DiscountService/src/services/discountService.js", "pattern": "/^async function applyDiscount({ cartId, discountCode, cartTotal = 0 }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ cartId, discountCode, cartTotal = 0 })"}, {"_type": "tag", "name": "computeDiscountAmount", "path": "/home/kavia/workspace/code-generation/online-grocery-mart-19003-19047/DiscountService/src/services/discountService.js", "pattern": "/^function computeDiscountAmount(discount, cartTotal) {$/", "language": "JavaScript", "kind": "function", "signature": "(discount, cartTotal)"}, {"_type": "tag", "name": "createDiscount", "path": "/home/kavia/workspace/code-generation/online-grocery-mart-19003-19047/DiscountService/src/services/discountService.js", "pattern": "/^async function createDiscount(dto) {$/", "language": "JavaScript", "kind": "function", "signature": "(dto)"}, {"_type": "tag", "name": "deleteDiscount", "path": "/home/kavia/workspace/code-generation/online-grocery-mart-19003-19047/DiscountService/src/services/discountService.js", "pattern": "/^async function deleteDiscount(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "getDiscount", "path": "/home/kavia/workspace/code-generation/online-grocery-mart-19003-19047/DiscountService/src/services/discountService.js", "pattern": "/^async function getDiscount(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "isDiscountValid", "path": "/home/kavia/workspace/code-generation/online-grocery-mart-19003-19047/DiscountService/src/services/discountService.js", "pattern": "/^  isDiscountValid,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "isDiscountValid", "path": "/home/kavia/workspace/code-generation/online-grocery-mart-19003-19047/DiscountService/src/services/discountService.js", "pattern": "/^function isDiscountValid(discount, at = new Date()) {$/", "language": "JavaScript", "kind": "function", "signature": "(discount, at = new Date())"}, {"_type": "tag", "name": "listDiscounts", "path": "/home/kavia/workspace/code-generation/online-grocery-mart-19003-19047/DiscountService/src/services/discountService.js", "pattern": "/^async function listDiscounts() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/online-grocery-mart-19003-19047/DiscountService/src/services/discountService.js", "pattern": "/^const model = require('..\\/models\\/discountModel');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updateDiscount", "path": "/home/kavia/workspace/code-generation/online-grocery-mart-19003-19047/DiscountService/src/services/discountService.js", "pattern": "/^async function updateDiscount(id, dto) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, dto)"}], "hash": "9bacf11d563df926dac32baca3fa18d6", "format-version": 4, "code-base-name": "DiscountService", "filename": "DiscountService/src/services/discountService.js", "fields": [{"name": "isDiscountValid,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"36": ""}]}